{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useFormik}from'formik';import*as yup from'yup';import{Box,Button,TextField,Typography,Container,Alert,Paper,Link,Stack}from'@mui/material';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const validationSchema=yup.object({email:yup.string().email('Enter a valid email').required('Email is required'),password:yup.string().required('Password is required')});export const LoginForm=()=>{const navigate=useNavigate();const{login,user,logout}=useAuth();const[error,setError]=useState(null);const formik=useFormik({initialValues:{email:'',password:''},validationSchema:validationSchema,onSubmit:async values=>{try{setError(null);await login(values.email,values.password);}catch(err){console.error('Login error:',err);setError(err.message||'An error occurred during login');}}});useEffect(()=>{if(user){if(user.role==='CREATOR'){navigate('/creator');}else if(user.role==='BRAND'){navigate('/brand');}else{// Handle unknown role or show error\nsetError('Invalid user role');logout();}}},[user,navigate]);return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",children:/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(Paper,{elevation:0,sx:{padding:4,display:'flex',flexDirection:'column',alignItems:'center',width:'100%'},children:[/*#__PURE__*/_jsx(Box,{component:\"img\",src:\"/Logo.png\",alt:\"Netwrkly Logo\",sx:{width:120,height:'auto',mb:3}}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",gutterBottom:true,sx:{fontWeight:700},children:\"Welcome back\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{mb:4},children:\"Sign in to continue to Netwrkly\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2,width:'100%'},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:formik.handleSubmit,sx:{width:'100%'},children:[/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"email\",label:\"Email\",name:\"email\",autoComplete:\"email\",autoFocus:true,value:formik.values.email,onChange:formik.handleChange,error:formik.touched.email&&Boolean(formik.errors.email),helperText:formik.touched.email&&formik.errors.email}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:formik.values.password,onChange:formik.handleChange,error:formik.touched.password&&Boolean(formik.errors.password),helperText:formik.touched.password&&formik.errors.password}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",size:\"large\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(Box,{sx:{mt:3,textAlign:'center'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{component:\"button\",variant:\"body2\",onClick:()=>navigate('/register'),sx:{fontWeight:600},children:\"Sign up\"})]})})]})]})})});};","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useFormik","yup","Box","Button","TextField","Typography","Container","Alert","Paper","Link","Stack","useAuth","jsx","_jsx","jsxs","_jsxs","validationSchema","object","email","string","required","password","LoginForm","navigate","login","user","logout","error","setError","formik","initialValues","onSubmit","values","err","console","message","role","component","maxWidth","children","sx","minHeight","display","flexDirection","alignItems","justifyContent","elevation","padding","width","src","alt","height","mb","variant","gutterBottom","fontWeight","color","severity","handleSubmit","spacing","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","handleChange","touched","Boolean","errors","helperText","type","size","mt","textAlign","onClick"],"sources":["/Users/adambrown/Desktop/Netwrkly/src/netwrkly/frontend/src/components/auth/LoginForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport {\n    Box,\n    Button,\n    TextField,\n    Typography,\n    Container,\n    Alert,\n    Paper,\n    Link,\n    Stack,\n} from '@mui/material';\nimport { useAuth } from '../../contexts/AuthContext';\n\nconst validationSchema = yup.object({\n    email: yup\n        .string()\n        .email('Enter a valid email')\n        .required('Email is required'),\n    password: yup\n        .string()\n        .required('Password is required'),\n});\n\nexport const LoginForm: React.FC = () => {\n    const navigate = useNavigate();\n    const { login, user, logout } = useAuth();\n    const [error, setError] = useState<string | null>(null);\n\n    const formik = useFormik({\n        initialValues: {\n            email: '',\n            password: '',\n        },\n        validationSchema: validationSchema,\n        onSubmit: async (values) => {\n            try {\n                setError(null);\n                await login(values.email, values.password);\n            } catch (err: any) {\n                console.error('Login error:', err);\n                setError(err.message || 'An error occurred during login');\n            }\n        },\n    });\n\n    useEffect(() => {\n        if (user) {\n            if (user.role === 'CREATOR') {\n                navigate('/creator');\n            } else if (user.role === 'BRAND') {\n                navigate('/brand');\n            } else {\n                // Handle unknown role or show error\n                setError('Invalid user role');\n                logout();\n            }\n        }\n    }, [user, navigate]);\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <Box\n                sx={{\n                    minHeight: '100vh',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                }}\n            >\n                <Paper\n                    elevation={0}\n                    sx={{\n                        padding: 4,\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center',\n                        width: '100%',\n                    }}\n                >\n                    <Box\n                        component=\"img\"\n                        src=\"/Logo.png\"\n                        alt=\"Netwrkly Logo\"\n                        sx={{\n                            width: 120,\n                            height: 'auto',\n                            mb: 3,\n                        }}\n                    />\n                    <Typography component=\"h1\" variant=\"h4\" gutterBottom sx={{ fontWeight: 700 }}>\n                        Welcome back\n                    </Typography>\n                    <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 4 }}>\n                        Sign in to continue to Netwrkly\n                    </Typography>\n                    {error && (\n                        <Alert severity=\"error\" sx={{ mb: 2, width: '100%' }}>\n                            {error}\n                        </Alert>\n                    )}\n                    <Box\n                        component=\"form\"\n                        onSubmit={formik.handleSubmit}\n                        sx={{ width: '100%' }}\n                    >\n                        <Stack spacing={2}>\n                            <TextField\n                                fullWidth\n                                id=\"email\"\n                                label=\"Email\"\n                                name=\"email\"\n                                autoComplete=\"email\"\n                                autoFocus\n                                value={formik.values.email}\n                                onChange={formik.handleChange}\n                                error={formik.touched.email && Boolean(formik.errors.email)}\n                                helperText={formik.touched.email && formik.errors.email}\n                            />\n                            <TextField\n                                fullWidth\n                                name=\"password\"\n                                label=\"Password\"\n                                type=\"password\"\n                                id=\"password\"\n                                autoComplete=\"current-password\"\n                                value={formik.values.password}\n                                onChange={formik.handleChange}\n                                error={formik.touched.password && Boolean(formik.errors.password)}\n                                helperText={formik.touched.password && formik.errors.password}\n                            />\n                            <Button\n                                type=\"submit\"\n                                fullWidth\n                                variant=\"contained\"\n                                size=\"large\"\n                            >\n                                Sign In\n                            </Button>\n                        </Stack>\n                        <Box sx={{ mt: 3, textAlign: 'center' }}>\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                                Don't have an account?{' '}\n                                <Link\n                                    component=\"button\"\n                                    variant=\"body2\"\n                                    onClick={() => navigate('/register')}\n                                    sx={{ fontWeight: 600 }}\n                                >\n                                    Sign up\n                                </Link>\n                            </Typography>\n                        </Box>\n                    </Box>\n                </Paper>\n            </Box>\n        </Container>\n    );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}